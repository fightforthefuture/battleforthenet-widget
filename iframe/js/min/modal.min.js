function stupidIEZoomFix(){ieVersion?($(".loading-region").addClass("zoomedOut").addClass("IE"),$("#modal").addClass("fullyVisible").addClass("IE"),setTimeout(function(){$("#header").addClass("fullyVisible").addClass("IE")},150)):($(".loading-region").addClass("zoomedOut").addClass("notIE"),$("#modal").addClass("fullyVisible").addClass("notIE"),setTimeout(function(){$("#header").addClass("fullyVisible").addClass("notIE")},150))}var animations={modal:{options:{debug:!1,skipEmailSignup:!1,skipCallTool:!1,fastAnimation:!1,boxUnchecked:!1,org:null},phoneCallAllowed:!0,zipcode:null,default_org:"fftf",init:function(a){for(var b in a)this.options[b]=a[b];return this},start:function(){this.options.skipEmailSignup&&($("#direct_call").show(),$("#petition").hide(),$(".bottom-link").hide(),$(".bottom-link").hide(),$("#last-donation-ask").hide()),this.options.skipCallTool&&(this.phoneCallAllowed=!1),this.options.boxUnchecked&&($("#opt-in").attr("checked",!1),$(".disclosure").removeClass("nice-check")),this.options.fastAnimation||!document.skipOptimizely&&document.fastForwardAnimation?($("body").addClass("fast-animation"),setTimeout(stupidIEZoomFix,10)):setTimeout(stupidIEZoomFix,2250),!document.skipOptimizely&&document.showCTATextImmediately&&($("#header h1").css("opacity",0),$("#header .cta").css("opacity",1)),this.optimizelyTextAB(),!this.options.org&&Math.random()<.16&&(this.options.org="fp"),"fp"==this.options.org?($("#fftf_disclosure").hide(),$("#fp_disclosure").show()):"dp"==this.options.org?($("#fftf_disclosure").hide(),$("#dp_disclosure").show()):"fftf_org"==this.options.org&&($("#fftf_disclosure").hide(),$("#fftf_org_disclosure").show()),$("a.close").click(function(a){a.preventDefault(),$("body").addClass("closed"),trackLeaderboardStat({stat:"close_widget",data:"modal"}),setTimeout(function(){sendMessage("stop")},750)}),$("a.letter").click(function(a){a.preventDefault(),$("#overlay").css("display","block"),setTimeout(function(){$("#overlay").addClass("visible")},50)}),$("a.continue").click(function(){$("#overlay").removeClass("visible"),setTimeout(function(){$("#overlay").css("display","none")},750)}),$("a#cantcall").click(function(a){a.preventDefault(),this.showFinal()}.bind(this)),$("form[name=petition]").submit(function(a){a.preventDefault(),this.postUser($(this))&&($("input:not([type=image],[type=button],[type=submit])").val(""),this.phoneCallAllowed?this.showPhoneCall():this.showFinal())}.bind(this)),$("form[name=direct_call]").submit(function(a){a.preventDefault();var b=this.validatePhone($("#phone_front").val());b?(this.placePhonecall(b),this.showFinalWithCallInstructions()):$("#phone_front").addClass("error")}.bind(this)),$("a.facebook").click(function(){trackLeaderboardStat({stat:"share",data:"facebook"})}),$("a.twitter").click(function(){trackLeaderboardStat({stat:"share",data:"twitter"})}),$("#call").click(function(a){a.preventDefault();var b=this.validatePhone($("#phone").val());return b?($("#call").attr("disabled",!0),$("#phone").attr("disabled",!0),this.placePhonecall(b),void setTimeout(function(){this.showFinalWithCallInstructions()}.bind(this),1e3)):$("#phone").addClass("error")}.bind(this)),$.ajax({url:"//fftf-geocoder.herokuapp.com/",dataType:"json",type:"get",success:function(a){a.country&&a.country.iso_code&&($("#country").val(a.country.iso_code),"US"!=a.country.iso_code&&(this.phoneCallAllowed=!1,this.options.skipEmailSignup&&sendMessage("stop")))}.bind(this)})},log:function(){this.options.debug&&console.log.apply(console,arguments)},postUser:function(){var a=["address1","email","name","zip"],b={},c=!1,d=$("form[name=petition]");if(a.forEach(function(a){$("input[name="+a+"]",d).removeClass("error"),$("input[name="+a+"]",d)[0]&&""===$("input[name="+a+"]",d).val()?(c=!0,$("input[name="+a+"]",d).addClass("error")):b[a]=$("input[name="+a+"]",d).val()}),c)return alert("Please enter your info so we can sign the letter.");this.zipcode=$("#zip").val();var e=/^\d{5}$/;return e.test(this.zipcode)||(this.phoneCallAllowed=!1),b.action_comment="",b.country=$("#country").val(),0==$("#opt-in").is(":checked")&&(b.opt_out=!0),b.org=this.options.org?this.options.org:this.default_org,$.ajax({url:"https://queue.battleforthenet.com/submit",type:"post",dataType:"json",data:b,success:function(a){userID=a.userID}}),trackLeaderboardStat({stat:"submit_form"}),this.trackOptimizely("fcc_post"),!0},trackOptimizely:function(a){window.optimizely=window.optimizely||[],window.optimizely.push(["trackEvent",a])},showFinalWithCallInstructions:function(){$("#stepFinal .defaultText").hide(),$("#stepFinal .altText").show(),this.showFinal()},validatePhone:function(a){return a=a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,""),a=a.replace("+","").replace(/\-/g,""),"1"==a.charAt(0)&&(a=a.substr(1)),10!=a.length?!1:a},placePhonecall:function(a){$("#call").html("Calling...");var b={campaignId:"battleforthenet",userPhone:a,fftfCampaign:"internetslowdown",fftfReferer:host,fftfSession:session};this.zipcode&&(b.zipcode=this.zipcode),$.ajax({url:"https://call-congress.fightforthefuture.org/create",type:"get",dataType:"json",data:b,success:function(a){console.log("Placed call-congress call: ",a)}}),this.trackOptimizely("call_congress")},showFinal:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),$("#stepCall").css("opacity",0),setTimeout(function(){$("#step1").css("visibility","hidden"),$("#stepCall").css("visibility","hidden")},1e3),$("#stepFinal").show(),setTimeout(function(){$("#stepFinal").css("opacity",1)},10)},showPhoneCall:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),setTimeout(function(){$("#step1").css("visibility","hidden")},1e3),$("#stepCall").show(),setTimeout(function(){$("#stepCall").css("opacity",1)},10)},optimizelyTextAB:function(){return!1}}};$(document).ready(function(){$("#header h1").html($("h1.headline").html()),$("#header .cta p").html($("p.cta-hidden-trust-me").html()),setTimeout(function(){$("#header .cta").css("height",$("#header").outerHeight()+"px"),$("#letter").css("height",$("#modal").outerHeight()+"px"),$("#letter").css("opacity",1)},1e3);var a=window.location.href;-1!=a.indexOf("EMBED")&&(document.body.className="embedded",document.skipOptimizely=!0,-1!=a.indexOf("NOCALL")&&(animations.modal.options.skipCallTool=!0),-1!=a.indexOf("NOEMAIL")&&(animations.modal.options.skipEmailSignup=!0),-1!=a.indexOf("UNCHECK")&&(animations.modal.options.boxUnchecked=!0),-1!=a.indexOf("DP")&&(animations.modal.options.org="dp"),-1!=a.indexOf("FP")&&(animations.modal.options.org="fp"),-1!=a.indexOf("FFF")&&(animations.modal.options.org="fftf_org"),animations.modal.options.fastAnimation=!0,animations.modal.start())});for(var ie10Styles=["msTouchAction","msWrapFlow","msWrapMargin","msWrapThrough","msOverflowStyle","msScrollChaining","msScrollLimit","msScrollLimitXMin","msScrollLimitYMin","msScrollLimitXMax","msScrollLimitYMax","msScrollRails","msScrollSnapPointsX","msScrollSnapPointsY","msScrollSnapType","msScrollSnapX","msScrollSnapY","msScrollTranslation","msFlexbox","msFlex","msFlexOrder"],ie11Styles=["msTextCombineHorizontal"],b=document.body,s=b.style,ieVersion=null,property,i=0;i<ie10Styles.length;i++)property=ie10Styles[i],void 0!=s[property]&&(ieVersion="ie10");for(var i=0;i<ie11Styles.length;i++)property=ie11Styles[i],void 0!=s[property]&&(ieVersion="ie11");ieVersion&&(document.getElementById("modal").className="IE",document.getElementById("header").className="IE");